<ion-view view-title="People">
  <ion-content  on-swipe-right="goBack()" on-swipe-left="goForward()">
    <ion-item class="item item-input-inset">
            <label class="item-input-wrapper">
              <input type="text" placeholder="Search by Email Address or Username" ng-model="newFriendData.searchTerm" ng-change="searchUsers()" >
            </label>        
    </ion-item>    
    <ion-item class="item item-button-right" ng-repeat="friend in searchResults" type="item-text-wrap"  >
        <h2>{{friend.username}}</h2>
        <button class="button button-positive button-medium" ng-disabled="friends.ids.indexOf( friend.id ) != -1" ng-click="addFriend( friend )" ><i class="icon ion-plus"></i></button>
    </ion-item>
    <ion-list>
      
      <ion-item class="item"  ng-repeat="friend in friends.requestReceived track by $index" >
        <div class="item-note">
            <button class="button button-positive button-medium" ng-click="acceptRequest( $index , friend )"  ng-disabled="data.submitted" ><i class="ion-plus"></i></button>
            <button class="button button-outline button-positive button-medium" ng-click="denyRequest( $index , friend )"  ng-disabled="data.submitted"><i class="ion-minus"></i></button>
        </div>      	        
        <h2>{{friend.username}}</h2>
        <p>{{friend.email}}</p>
      </ion-item>
      <ion-item class="item item-button-right"  ng-repeat="friend in friends.requestAccepted track by $index" ng-click="friend.editable = !friend.editable;" > <!-- ng-click="goToFriend( friend.ID )" -->
            <h2>{{friend.username}}</h2>
            <button class="button button-positive button-medium remove-user-button" ng-show="friend.editable"  ng-click="removeFriend( $index , friend.email ); friend.editable = true;" ng-disabled="data.submitted"  ><i class="icon ion-minus"></i></button>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-view>
